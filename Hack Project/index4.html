<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TribeHeritage — Home</title>
  <link rel="stylesheet" href="styles1.css">
</head>
<body>
  <a class="skip" href="#main">Skip to main content</a>

  <header class="site-header">
    <div class="header-top container">
      <!-- LEFT: brand -->
      <a class="brand" href="index.html">
        <img src="assets/img/logo-placeholder.png" alt="TribeHeritage logo" class="brand__img">
        <span class="brand__text">DIGITAL MUSEUM OF<br>TRIBAL CULTURE</span>
      </a>

      <!-- CENTER: nav (auto-moves overflow to More) -->
      <nav class="nav" aria-label="Primary navigation">
        <ul class="nav__list" id="mainNav">
          <li class="nav__item nav__item--active"><a href="index.html">Home</a></li>
          <li class="nav__item"><a href="tribes.html">Tribes</a></li>
          <li class="nav__item"><a href="arts.html">Arts</a></li>
          <li class="nav__item"><a href="festivals.html">Festivals</a></li>
          <li class="nav__item"><a href="clothing.html">Clothing</a></li>
          <li class="nav__item"><a href="music.html">Music</a></li>
          <li class="nav__item"><a href="food.html">Food</a></li>
          <li class="nav__item"><a href="gallery.html">Gallery</a></li>
          <li class="nav__item"><a href="stories.html">Stories</a></li>
          <li class="nav__item"><a href="map.html">Map</a></li>
          <li class="nav__item"><a href="research.html">Research</a></li>
          <li class="nav__item"><a href="events.html">Events</a></li>
          <li class="nav__item"><a href="about.html">About</a></li>
          <li class="nav__item"><a href="contact.html">Contact</a></li>
          <li class="nav__item"><a href="donate.html">Donate</a></li>

          <!-- More dropdown container (keeps overflow items) -->
          <li class="nav__item nav__more" id="moreItem" aria-haspopup="true">
            <button class="more-btn" aria-expanded="false">More ▾</button>
            <ul class="more-menu" id="moreMenu" aria-label="More menu"></ul>
          </li>
        </ul>
      </nav>

      <!-- RIGHT: profile + sign in -->
      <div class="header-actions">
        <a href="profile.html" class="profile-btn" title="Your profile">
          <img src="assets/img/avatar-1.jpg" alt="Profile" class="profile-avatar">
          <span class="profile-name">Profile</span>
        </a>

        <a class="btn btn--ghost" href="login.html">Sign in</a>
      </div>
    </div>
  </header>

  <main id="main">
    <!-- HERO -->
    <section class="hero">
      <div class="container hero-grid">
        <div class="hero__left">
          <span class="kicker">Living Traditions — Home</span>
          <h1 class="hero__title">Meet the Makers — <span class="accent">Living Traditions Preserved</span></h1>
          <p class="hero__lead">Stories, artifacts and songs from regional tribes — curated for discovery, research and learning. Explore photos, oral histories and curated essays.</p>

          <div class="hero__ctas">
            <a class="btn btn--primary" href="tribes.html">Explore Tribes</a>
            <a class="btn btn--outline" href="gallery.html">Visit Gallery</a>
          </div>

          <div class="hero__info-cards">
            <article class="mini-card">
              <img src="assets/img/person-1.jpg" alt="Featured elder" class="mini-card__img">
              <div class="mini-card__body">
                <strong>Mira — Textile Keeper</strong>
                <small>Eastern Hills · Weavers</small>
              </div>
            </article>

            <article class="stats-card">
              <div class="stat">
                <span class="stat__num">18</span>
                <span class="stat__label">Tribes</span>
              </div>
              <div class="stat">
                <span class="stat__num">300+</span>
                <span class="stat__label">Artifacts</span>
              </div>
              <div class="stat">
                <span class="stat__num">120</span>
                <span class="stat__label">Stories</span>
              </div>
            </article>
          </div>
        </div>

        <div class="hero__right">
          <div class="featured-visual">
            <img src="assets/img/hero-panel.jpg" alt="Featured artisan portrait" class="featured-visual__img">
            <div class="featured-visual__caption">
              <strong>Mira — weaving a ceremonial sari</strong>
              <a href="tribe-detail.html" class="small-link">View story →</a>
            </div>
          </div>

          <div class="highlight-card">
            <img src="assets/img/person-2.jpg" alt="Story thumbnail" class="highlight-card__img">
            <div class="highlight-card__content">
              <h4>From hearth fires to digital constellations</h4>
              <p>How community memory is preserved in motif & melody — a short curator's note.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- page content -->
    <section class="section container">
      <div class="section-head">
        <h2>Tribes of India — Regions, languages, and living archives</h2>
        <p class="muted">Search, filter and explore tribe profiles, arts and curated stories.</p>
      </div>

      <div class="cards-row">
        <article class="profile-card">
          <img src="assets/img/thumb-1.jpg" alt="" class="profile-card__img">
          <div class="profile-card__meta">
            <h3>Kora Weavers</h3>
            <small>Weaving · Eastern Hills</small>
            <p class="muted">Elder Mira preserves river-root dye methods and ceremonial motifs.</p>
          </div>
        </article>

        <article class="profile-card">
          <img src="assets/img/thumb-2.jpg" alt="" class="profile-card__img">
          <div class="profile-card__meta">
            <h3>Songline Keepers</h3>
            <small>Music · River Valley</small>
            <p class="muted">Oral songs that encode seasonal cycles and migration stories.</p>
          </div>
        </article>

        <article class="profile-card">
          <img src="assets/img/thumb-3.jpg" alt="" class="profile-card__img">
          <div class="profile-card__meta">
            <h3>Forest Artisans</h3>
            <small>Carving · Hill Tribes</small>
            <p class="muted">Wood carving traditions and ritual mask making.</p>
          </div>
        </article>
      </div>
    </section>

  </main>

  <footer class="site-footer">
    <div class="container footer-inner">
      <p>© 2025 TribeHeritage — Digital Museum</p>
      <nav class="footer-nav">
        <a href="privacy.html">Privacy</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
  </footer>

  <!-- overflow-to-More script (keeps More menu updated) -->
  <script>
    (function () {
      const navList = document.getElementById('mainNav');
      const moreItem = document.getElementById('moreItem');
      const moreMenu = document.getElementById('moreMenu');
      const MORE_BTN = moreItem.querySelector('.more-btn');

      function getNavItems() {
        return Array.from(navList.querySelectorAll(':scope > li.nav__item'))
          .filter(li => !li.classList.contains('nav__more'));
      }

      function updateMore() {
        // move everything back
        const moved = Array.from(moreMenu.querySelectorAll('li'));
        moved.forEach(li => {
          navList.insertBefore(li, moreItem);
        });

        // measure available width for nav items (nav area width minus some buffer)
        const navRect = navList.getBoundingClientRect();
        const containerRect = navList.parentElement.getBoundingClientRect();
        // compute available width between brand and header actions by using parent width
        const available = navRect.width - moreItem.offsetWidth - 40;
        let used = 0;

        const items = getNavItems();
        for (let i = 0; i < items.length; i++) {
          const item = items[i];
          item.classList.remove('hidden-for-more');
          used += item.offsetWidth;
          if (used > available) {
            for (let j = items.length - 1; j >= i; j--) {
              const it = items[j];
              it.classList.add('hidden-for-more');
              moreMenu.insertBefore(it, moreMenu.firstChild);
            }
            break;
          }
        }

        const hasMore = moreMenu.children.length > 0;
        moreItem.style.display = hasMore ? 'inline-flex' : 'none';
      }

      MORE_BTN.addEventListener('click', function (e) {
        e.stopPropagation();
        const expanded = MORE_BTN.getAttribute('aria-expanded') === 'true';
        MORE_BTN.setAttribute('aria-expanded', String(!expanded));
        moreItem.classList.toggle('open', !expanded);
      });

      document.addEventListener('click', function () {
        MORE_BTN.setAttribute('aria-expanded', 'false');
        moreItem.classList.remove('open');
      });

      // init + resize debounce
      updateMore();
      let rTimer;
      window.addEventListener('resize', () => {
        clearTimeout(rTimer);
        rTimer = setTimeout(updateMore, 120);
      });
    })();
  </script>
</body>
</html>
